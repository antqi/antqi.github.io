### 作用域链概念

- 多个上下级关系的作用域形成的链，它的方向是从下向上的（从内到外）
- 查找变量时就是沿着作用域链来查找的

### 一个变量的查找规则

- 在当前作用域下的执行上下文查找对应的属性，如果有直接返回，否则进入上层作用域
- 在上层作用域下的执行上下文查找对应的属性，如果有则返回，否则进入更上层作用域
- 重复执行2 ，直到全局作用域，如果找不到则跑出异常

``` javascript
// global scope
var a = 2 

function fn1(){
  // fn1 scope
  var b = 3
  
  function fn2(){
    // fn2 scope
    var c = 4
    console.log(c) // 4 在fn2 找到c，返回
    console.log(b) // 3	先从fn2找，没有则向上层作用域fn1找，发现b，返回
    console.log(a) // 2	先从fn2找，没有则向上层作用域fn1找，没有找到，继续想上层global找，发现a，返回
   	console.log(d) //	ReferenceError d is not define ，先从fn2找，没有则向上层作用域fn1找，没有找到，继续想上层global找，global也没找到，返回报错
  }
  
  fn2()
}

fn1()
```



### QA

1. ``` javascript
   var x = 10
   function fn(){
     console.log(x) 
   }
   function show(f){
     var x = 20 
     f()
   }
   
   /**
   global
   	x=10
   	fn
   	show
   		x=20
   */
   show(fn) // 10
   ```

2. ``` javascript
   var fn = function(){
     console.log(fn)
   }
   
   fn()
   
   var obj = {
     fn2:function(){
       console.log(fn2)
       // console.log(this.fn2)
     }
   }
   
   obj.fn2()
   ```

