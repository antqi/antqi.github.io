## 描述对象属性是什么？

> Ecmascript 5标准中的可精确的定义或修改对象属性

对象属性描述符有两种：

- ##### object.defineProperty(obj, prop, descriptor)

  定义或修改属性

  - `obj`需要定义属性的对象
  - `prop`需要定义的属性，symbol
  - `descriptor`属性描述，是一个对象，包含多个描述符

- #### object.defineProperties(obj,props)

  定义或修改多个属性

  - `obj`需要定义属性的对象
  - `props`需要定义的属性集，object



## 属性描述符

> 属性描述符又可分为两类：数据描述属性、访问描述属性

### 数据描述属性

##### 什么是数据描述属性？



##### [configurable]

Boolean ,是否可配置，默认值false

``` javascript
var obj1 ={}

Object.defineProperty(obj1, 'desc', {
  configurable: false, // 设置不可配置
})

// 再次配置
Object.defineProperty(obj1, 'desc', {
  writable: false,
})
// 报错 Uncaught TypeError: Cannot redefine property: desc
```

##### [enumerable]

Boolean,是否可枚举，默认值false

``` javascript
var obj1={
  name:'Tim',
  age:10
}
Object.defineProperty(obj1, 'age', {
  enumerable: false,
})
console.log(Object.keys(obj1)) // ['name']
// 类似的for in 也无法枚举 enumerable:false的属性
```

##### [value]

设置属性的默认值，这个和setter有区别。默认值undefined

``` javascript
var obj1={
  name:'Tim',
  age:10
}

Object.defineProperty(obj1, 'name2', {
  value: 'John',
})
console.log(obj1.name2) // John
```

##### [writable] 

Boolean,是否可写，默认值false

``` javascript
var obj1={
  name:'Tim'
}

Object.defineProperty(obj1, 'name', {
  writable: false, // 设置不可写
})
obj1.name = '小宝'
console.log(obj1.name) // Tim 
// 不会报错，但无法修改
```





### 访问描述属性

##### [getter]

监视属性值变化

##### [setter]

设置属性值

``` javascript
var obj1 = {
  name: 'Tim',
  age: 10,
}

// obj1添加简意自我介绍属性
// obj1.desc = `${obj1}${age}岁` // 太low了
Object.defineProperty(obj1, 'desc', {
  get() {
    return `${this.name}-${this.age}岁`
  },
  set(value) {
    const arr = value.replace(/岁$/, '').split(',')
    this.name = arr[0]
    this.age = arr[1]
  },
})

console.log(obj1.desc) // Tim,10岁
obj1.desc = '大宝,3岁'
console.log(obj1.name, obj1.age) //大宝 3
```



### 扩展

##### 属性的不可继承

使用以下方式可得到一个干净的类似map 的结构

``` javascript 
Object.create(null)
obj.__prop__=null
```

##### 查找对象是否具有此属性

###### hasOwnProperty

查找自定义属性是否包含某属性

``` javascript
console.log(obj1.hasOwnProperty('name'), obj1.hasOwnProperty('toString')) // true false
```

###### in

查找对象的所有属性是否包含某属性

``` javascript
console.log('name' in obj1, 'toString' in obj1) // true true
```

